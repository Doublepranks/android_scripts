#!/bin/bash
# Written by Sean Donovan (swordrune10)
clear

if ( find ../redeemer &> /dev/null ); then
	rm -f ../redeemer
fi

export REPOS=$(echo "$LOCAL/../../repos")
echo "Swordrune10's Android Kitchen!"
echo "=============================="
echo "Something is not working right? What should we do?"
echo "Purge = remove files, download from origin"
echo "Delete = delete it!"
echo "  1. Purge a certain local_manifest.xml file"
echo "  2. Purge all local_manifest.xml files"
echo "  3. Purge/Delete a certain repository"
echo "  4. Purge/Delete all the repositories"
echo "  5. Purge/Delete the Kitchen app"
echo "  6. Delete the Kitchen app, and its dependencies"
echo "  7. Delete entire computer"
echo "  8. Go Back"
echo ""
echo "Which one would you like to do?"
read cleananswer

if [ "$cleananswer" == "" ]; then
	echo ""
	echo "You did not make a proper selection, try again!"
	echo "Press Enter to continue"
	read done

	$LOCAL/kitchencleaner
	exit 0
fi

if [ $cleananswer -gt "8" ]; then
	echo ""
	echo "You did not make a proper selection, try again!"
	echo "Press Enter to continue"
	read done

	$LOCAL/kitchencleaner
	exit 0
fi

if [ $cleananswer == "1" ]; then
	clear

	echo ""	
	echo "which repo would you like to modify?"
	echo "Cyanogenmod 9 = cm"
	echo "Rooted & Busyboxed AOSP = rooted-aosp"
	echo "Android Open Source Project = aosp"
	echo "type exit to go to back"
	read cleanse

	if [ "$cleanse" == "" ]; then
		echo ""
		echo "You didn't type in anything.."
		read done

		$LOCAL/kitchencleaner
		exit 0
	fi

	if [ $cleanse == "exit" ]; then
		echo ""
		echo "Press Enter to continue"
		read done

		$LOCAL/kitchencleaner
		exit 0
	fi

	if [ $cleanse == "cm" ]; then
		echo ""	
		echo "Purging local_manifest.xml for Cyanogenmod 9.."
		cd $REPOS/cm-ics/.repo
		rm -f $REPOS/cm9-ics/.repo/local_manifest.xml
		cp -f $LOCAL/xml/cm9-local_manifest.xml ./local_manifest.xml
	fi

	if [ $cleanse == "rooted-aosp" ]; then
		echo ""	
		echo "Purging local_manifest.xml for Rooted & Busyboxed AOSP.."
		cd $REPOS/rooted-aosp-ics/.repo
		rm -f $REPOS/rooted-aosp-ics/.repo/local_manifest.xml
		cp -f $LOCAL/xml/rootedaosp-local_manifest.xml ./local_manifest.xml
	fi

	if [ $cleanse == "aosp" ]; then
		echo ""	
		echo "Purging local_manifest.xml for Android Open Source Project.."
		cd $REPOS/aosp-ics/.repo
		rm -f $REPOS/aosp-ics/.repo/local_manifest.xml
		cp -f $LOCAL/xml/aosp-local_manifest.xml ./local_manifest.xml
	fi

	echo ""
	echo "Finished!"
fi

if [ $cleananswer == "2" ]; then
	echo ""	
	echo "Purging all local_manifest.xml files.."
	cd $REPOS/cm-ics/.repo
	rm -f $REPOS/cm9-ics/.repo/local_manifest.xml
	cp -f $LOCAL/xml/cm9-local_manifest.xml ./local_manifest.xml

	cd $REPOS/rooted-aosp-ics/.repo
	rm -f $REPOS/rooted-aosp-ics/.repo/local_manifest.xml
	cp -f $LOCAL/xml/rootedaosp-local_manifest.xml ./local_manifest.xml

	cd $REPOS/aosp-ics/.repo
	rm -f $REPOS/aosp-ics/.repo/local_manifest.xml
	cp -f $LOCAL/xml/aosp-local_manifest.xml ./local_manifest.xml

	echo ""
	echo "Finished!"
fi

if [ $cleananswer == "3" ]; then
	clear

	echo ""
	echo "which repo would you like to modify?"
	echo "Cyanogenmod 9 = cm"
	echo "Rooted & Busyboxed AOSP = rooted-aosp"
	echo "Android Open Kang Project = aokp"
	echo "Team Gummy = gummy"
	echo "Android Open Source Project = aosp"
	echo "type exit to go to back"
	read modify

	if [ "$modify" == "" ]; then
		echo ""
		echo "You didn't type in anything.."
		read done

		$LOCAL/kitchencleaner
		exit 0
	fi

	if [ $modify == "exit" ]; then
		echo ""
		echo "Press Enter to continue"
		read done

		$LOCAL/kitchencleaner
		exit 0
	fi

	echo ""
	echo "Purge or Delete?"
	echo "Purge = remove files, download from origin"
	echo "Delete = delete it!"
	echo "type exit to go to back"
	read remover

	if [ "$remover" == "" ]; then
		echo ""
		echo "You didn't type in anything.."
		read done

		$LOCAL/kitchencleaner
		exit 0
	fi

	if [ $remover == "exit" ]; then
		echo ""
		echo "Press Enter to continue"
		read done

		$LOCAL/kitchencleaner
		exit 0
	fi

	cd $REPOS/$modify-ics

	if [ $remover == "Purge" ] || [ $remover == "purge" ]; then
		rm -rf *
		~/bin/repo sync
	fi

	if [ $remover == "Delete" ] || [ $remover == "delete" ]; then
		cd ..
		rm -rf $modify-ics
	fi
	
fi

if [ $cleananswer == "4" ]; then
	clear

	echo ""
	echo "Purge or Delete the repositories?"
	echo "Purge = remove files, download from origin"
	echo "Delete = delete it!"
	echo "type exit to go to back"
	read remover

	if [ "$remover" == "" ]; then
		echo ""
		echo "You didn't type in anything.."
		read done

		$LOCAL/kitchencleaner
		exit 0
	fi

	if [ $remover == "exit" ]; then
		echo ""
		echo "Press Enter to continue"
		read done

		$LOCAL/kitchencleaner
		exit 0
	fi

	if ( find $REPOS/cm-ics &> /dev/null ); then
		cd $REPOS/cm-ics

		if [ $remover == "Purge" ] || [ $remover == "purge" ]; then
			rm -rf *
			~/bin/repo sync
		fi

		if [ $remover == "Delete" ] || [ $remover == "delete" ]; then
			cd ..
			rm -rf cm-ics
		fi
	fi

	if ( find $REPOS/rooted-aosp-ics &> /dev/null ); then
		cd $REPOS/rooted-aosp-ics

		if [ $remover == "Purge" ] || [ $remover == "purge" ]; then
			rm -rf *
			~/bin/repo sync
		fi

		if [ $remover == "Delete" ] || [ $remover == "delete" ]; then
			cd ..
			rm -rf rooted-aosp-ics
		fi
	fi

	if ( find $REPOS/aosp-ics &> /dev/null ); then
		cd $REPOS/aosp-ics

		if [ $remover == "Purge" ] || [ $remover == "purge" ]; then
			rm -rf *
			~/bin/repo sync
		fi

		if [ $remover == "Delete" ] || [ $remover == "delete" ]; then
			cd ..
			rm -rf aosp-ics
		fi
	fi

	echo ""
	echo "Finished!"
fi
	
if [ $cleananswer == "5" ]; then
	clear

	echo ""
	echo "Purge or Delete?"
	echo "Purge = remove files, download from origin"
	echo "Delete = delete it!"
	echo "type exit to go back"
	read remover

	if [ "$remover" == "" ]; then
		echo ""
		echo "You didn't type in anything.."
		read done

		$LOCAL/kitchencleaner
		exit 0
	fi

	if [ $remover == "exit" ]; then
		echo ""
		echo "Press Enter to continue"
		read done

		$LOCAL/kitchencleaner
		exit 0
	fi

	cd $LOCAL/..

	if [ $remover == "Purge" ] || [ $remover == "purge" ]; then
		export AUTHOR="redeemer"
		$LOCAL/scriptmakir

		chmod a+x redeemer
		echo ""
		echo "Switching to Redeemer script.."
		echo ""
		./redeemer
		echo ""
		echo "Finished!"
	fi

	if [ $remover == "Delete" ] || [ $remover == "delete" ]; then
		echo ""
		echo "Are you sure you want to remove the Kitchen app?"
		echo "You must type in \"yes\" to continue"
		echo ""
		echo "Type in anything else to abort operation"
		read destroyer

		if [ "$destroyer" == "" ]; then
			echo ""
			echo "You didn't type in anything.."
			read done

			$LOCAL/kitchencleaner
			exit 0
		fi

		if [ $destroyer == "yes" ]; then
			export AUTHOR="destroyer"
			$LOCAL/scriptmakir

			chmod a+x destroyer
			echo ""
			echo "Thank you for using Swordrune10's Kitchen!"
			echo "Switching to Destroyer script.."
			echo ""
			./destroyer
			exit 0
		fi
	fi
fi

if [ $cleananswer == "6" ]; then
	clear

	echo ""
	echo "Are you sure you want to remove the Kitchen app and its dependencies?"
	echo "Please note: the builds directory will not be deleted?"
	echo "You must type in \"yes\" to continue"
	echo ""
	echo "Type in anything else to abort operation"
	read destroyerofworlds

	if [ "$destroyerofworlds" == "" ]; then
		echo ""
		echo "You didn't type in anything.."
		read done

		$LOCAL/kitchencleaner
		exit 0
	fi

	if [ $destroyerofworlds == "yes" ]; then
		export AUTHOR="destroyerofworlds"
		$LOCAL/scriptmakir

		chmod a+x destroyerofworlds
		echo ""
		echo "Thank you for using Swordrune10's Kitchen!"
		echo "Switching to Destroyer of Worlds script.."
		echo ""
		./destroyerofworlds
		exit 0
	fi
fi

if [ $cleananswer == "7" ]; then
	clear

	echo ""
	echo "Are you sure..? this will delete everything on your computer, including external drives and flash drives!!"
	echo "You must type in \"yes, please delete everything off my computer\" to continue"
	echo ""
	echo "Type in anything else to bail out"
	read suicidenote

	if [ "$suicidenote" == "" ]; then
		echo ""
		echo "You didn't type in anything.."
		read done

		$LOCAL/kitchencleaner
		exit 0
	fi

	if [ ! $suicidenote == "yes, please delete everything off my computer" ]; then
		echo ""
		echo "Please dont try that again..."
	fi

	if [ $suicidenote == "yes, please delete everything off my computer" ]; then
		echo ""
		echo "Please type in your password to destroy everything"		
		sudo rm -rf /
	fi

	echo ""
	echo "Finished!"
fi

if [ $cleananswer == "8" ]; then
	echo ""
	echo "Returning to Main Menu, Press Enter to continue"
	read done
	exit 0
fi

echo ""
echo "Press Enter to continue"
read done

$LOCAL/kitchencleaner
exit 0
